# Deep Dive: –ó–∞–≥–∞—Ä—Ç–æ–≤—É–≤–∞–Ω–Ω—è LAMP —Å—Ç–µ–∫—É (Security Hardening) üõ°Ô∏èüèóÔ∏è

–ù–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ–π —Å—Ç–∞–¥—ñ—ó DevOps, –ø—Ä–æ—Å—Ç–æ—ó —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó `apt install` –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ. –ú–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –∫–æ–∂–µ–Ω —à–∞—Ä –Ω–∞—à–æ—ó Corporate Layered –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

## 1. Apache Hardening (–†—ñ–≤–µ–Ω—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó)
Apache –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–∞–Ω–∞–¥—Ç–æ –±–∞–ª–∞–∫—É—á–∏–π. –ú–∏ –æ–±–º–µ–∂—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, —è–∫—É –≤—ñ–Ω –≤—ñ–¥–¥–∞—î —Å–≤—ñ—Ç—É.

### –ü—Ä–∏—Ö–æ–≤–∞–Ω–Ω—è –≤–µ—Ä—Å—ñ–π –≤ `/etc/apache2/conf-enabled/security.conf`:
- `ServerTokens Prod` ‚Äî –∑–∞–º—ñ—Å—Ç—å "Apache/2.4.41 (Ubuntu)" –∫–ª—ñ—î–Ω—Ç –ø–æ–±–∞—á–∏—Ç—å –ø—Ä–æ—Å—Ç–æ "Apache".
- `ServerSignature Off` ‚Äî –ø—Ä–∏–±–∏—Ä–∞—î –≤–µ—Ä—Å—ñ—é —Å–µ—Ä–≤–µ—Ä–∞ –∑ —Ñ—É—Ç–µ—Ä–∞ —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –ø–æ–º–∏–ª–æ–∫.

### –ó–∞–±–æ—Ä–æ–Ω–∞ –ª—ñ—Å—Ç–∏–Ω–≥—É —Ñ–∞–π–ª—ñ–≤:
–£ –∫–æ–Ω—Ñ—ñ–≥—É –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É (VirtualHost):
```apache
<Directory /var/www/html>
    Options -Indexes +FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>
```

## 2. PHP Security (–†—ñ–≤–µ–Ω—å –ª–æ–≥—ñ–∫–∏)
PHP –º–∞—î –∫—ñ–ª—å–∫–∞ "–Ω–µ–±–µ–∑–ø–µ—á–Ω–∏—Ö" —Ñ—É–Ω–∫—Ü—ñ–π, —è–∫—ñ –≤–∞—Ä—Ç–æ –≤–∏–º–∫–Ω—É—Ç–∏ –≤ `php.ini`.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è `disable_functions`:
`disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_multi_exec,parse_ini_file,show_source`

### –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤:
`open_basedir = /var/www/html:/tmp` ‚Äî PHP –∑–º–æ–∂–µ —á–∏—Ç–∞—Ç–∏ —Ñ–∞–π–ª–∏ —Ç—ñ–ª—å–∫–∏ –≤ —Ü–∏—Ö –ø–∞–ø–∫–∞—Ö.

## 3. Database Isolation (–†—ñ–≤–µ–Ω—å –¥–∞–Ω–∏—Ö)
–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö ‚Äî —Ü–µ –Ω–∞–π—Ü—ñ–Ω–Ω—ñ—à–µ. –í–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞.

- **Bind-Address:** –£ `my.cnf` –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `bind-address = 127.0.0.1`. –ë–∞–∑–∞ –Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ "—Å–ª—É—Ö–∞—Ç–∏" –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–≤—ñ—Ç.
- **Least Privilege User (The Senior Way):**
WordPress –¥–ª—è –±–∞–∑–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏ –ø–æ—Ç—Ä–µ–±—É—î –ª–∏—à–µ 4 –ø—Ä–∞–≤–∞: `SELECT`, `INSERT`, `UPDATE`, `DELETE`.
```sql
CREATE USER 'wp_user'@'172.16.238.%' IDENTIFIED BY 'secure_password';
GRANT SELECT, INSERT, UPDATE, DELETE ON kodekloud_db5.* TO 'wp_user'@'172.16.238.%';
FLUSH PRIVILEGES;
```
*–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥–æ–¥–∞—Ç–∫—É –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –ø—Ä–∞–≤ DROP TABLE —á–∏ GRANT. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –ø–ª–∞–≥—ñ–Ω–∏ —á–∏ —è–¥—Ä–æ, –ø—Ä–∞–≤–∞ –º–æ–∂–Ω–∞ —Ç–∏–º—á–∞—Å–æ–≤–æ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏, –∞ –ø–æ—Ç—ñ–º –∑–Ω–æ–≤—É –æ–±–º–µ–∂–∏—Ç–∏.*

## 4. –§—ñ–ª–æ—Å–æ—Ñ—ñ—è "White Hat"
–£—è–≤—ñ—Ç—å, —â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑–º—ñ–≥ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ shell-—Å–∫—Ä–∏–ø—Ç —É `/var/www/html/uploads`.
–Ø–∫—â–æ –ø–∞–ø–∫–∞ `uploads` –Ω–µ –º–∞—î –∑–∞–±–æ—Ä–æ–Ω–∏ –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ (`php_flag engine off`), –≤—ñ–Ω –æ—Ç—Ä–∏–º–∞—î –∫–æ–Ω—Ç—Ä–æ–ª—å. –ó–∞–≤–∂–¥–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É–π—Ç–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø—ñ–¥–ø–∞–ø–æ–∫.

---
**–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è:** [–î–µ–Ω—å 18: LAMP Setup](./README.md)
