# Deep Dive: –†–æ–ª—ñ —Ç–∞ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –≤ PostgreSQL üêòüõ°Ô∏è

PostgreSQL –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–Ω—è—Ç—Ç—è "–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á" —É –∫–ª–∞—Å–∏—á–Ω–æ–º—É —Ä–æ–∑—É–º—ñ–Ω–Ω—ñ OS. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î –∑ **–†–æ–ª—è–º–∏ (Roles)**.

## 1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á vs –†–æ–ª—å
–£ —Å—É—á–∞—Å–Ω–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö PG `CREATE USER` ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ –∞–ª—ñ–∞—Å –¥–ª—è `CREATE ROLE ... WITH LOGIN`.
- **Role:** –ú–æ–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç–∏ –≥—Ä—É–ø—É –∞–±–æ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
- **Login:** –ü—Ä–∞–ø–æ—Ä, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–ª—ñ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è –¥–æ –ë–î.

## 2. –ì—ñ—î—Ä–∞—Ä—Ö—ñ—è –ø—Ä–∞–≤ (The Chain of Consent)
–©–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–≥ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ç–∞–±–ª–∏—Ü—è–º–∏, –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø—Ä–∞–≤–∞ –Ω–∞ —Ç—Ä—å–æ—Ö —Ä—ñ–≤–Ω—è—Ö:
1.  **–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –ë–î**: –ü—Ä–∞–≤–∞ –Ω–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (`CONNECT`).
2.  **–°—Ö–µ–º–∞ (Schema)**: –ü—Ä–∞–≤–∞ –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —É —Å—Ö–µ–º—ñ (`USAGE`).
3.  **–¢–∞–±–ª–∏—Ü—ñ/–û–±'—î–∫—Ç–∏**: –ü—Ä–∞–≤–∞ –Ω–∞ `SELECT`, `INSERT`, `UPDATE` —Ç–æ—â–æ.

## 3. –ö–æ–º–∞–Ω–¥–∞ GRANT ALL PRIVILEGES
–ö–æ–ª–∏ –º–∏ —Ä–æ–±–∏–º–æ `GRANT ALL PRIVILEGES ON DATABASE kodekloud_db6 TO kodekloud_roy;`, –º–∏ –Ω–∞–¥–∞—î–º–æ:
- `CREATE`: –î–æ–∑–≤—ñ–ª —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Å—Ö–µ–º–∏ –≤ –ë–î.
- `CONNECT`: –î–æ–∑–≤—ñ–ª –Ω–∞ –≤—Ö—ñ–¥.
- `TEMPORARY`: –î–æ–∑–≤—ñ–ª —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ.

> [!WARNING]
> –¶–µ **–ù–ï** –Ω–∞–¥–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —ñ—Å–Ω—É—é—á–∏—Ö —Å—Ö–µ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `public`). –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–∫—Ä–µ–º–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **Default Privileges**.

## 4. SecOps Best Practice: Least Privilege üõ°Ô∏è
–ó–∞–º—ñ—Å—Ç—å `ALL PRIVILEGES`, –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
```sql
GRANT CONNECT ON DATABASE app_db TO app_user;
-- –ü–æ—Ç—ñ–º —É —Å–∞–º—ñ–π –±–∞–∑—ñ:
GRANT USAGE ON SCHEMA public TO app_user;
GRANT SELECT, INSERT, UPDATE ON ALL TABLES IN SCHEMA public TO app_user;
```

## 5. –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –≤ CLI
- `\du`: –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π —Ç–∞ —ó—Ö –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∞—Ç—Ä–∏–±—É—Ç—ñ–≤.
- `\l` –∞–±–æ `\l+`: –°–ø–∏—Å–æ–∫ –±–∞–∑ —Ç–∞ —ó—Ö –≤–ª–∞—Å–Ω–∏–∫—ñ–≤/–ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É.
- `\z [table_name]`: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.

–¢–µ–ø–µ—Ä —Ç–∏ –∑–Ω–∞—î—à, —è–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –≤ –æ–¥–Ω—ñ–π –∑ –Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∏—Ö –ë–î —É —Å–≤—ñ—Ç—ñ! üöÄü¶æ
