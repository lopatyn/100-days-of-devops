# Day 9: MariaDB Troubleshooting üîçüóÑÔ∏è

> **Hook:** –ö–æ–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –ª–µ–∂–∏—Ç—å ‚Äî –±—ñ–∑–Ω–µ—Å –≤—Ç—Ä–∞—á–∞—î –≥—Ä–æ—à—ñ. –ß–∞—Å —Å—Ç–∞–≤–∞—Ç–∏ –≥–µ—Ä–æ—î–º –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è! üõ†Ô∏è
>
> **Problem-Solution-Value:** –ü—Ä–æ–≥—Ä–∞–º–∞ –Ω–µ –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –ë–î? –í–∏—è–≤–∏–ª–æ—Å—è, —â–æ MariaDB –Ω–µ –ø—Ä–∞—Ü—é—î, –±–æ —ó—ó "—Å–µ—Ä—Ü–µ" ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–∞–Ω–∏—Ö ‚Äî –ø–æ—Ä–æ–∂–Ω—è –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—è. –°—å–æ–≥–æ–¥–Ω—ñ –º–∏ –ø—Ä–æ–π—à–ª–∏ –ø–æ–≤–Ω–∏–π —à–ª—è—Ö –≤—ñ–¥ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `journalctl` –¥–æ —Ä–µ–∞–Ω—ñ–º–∞—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É —á–µ—Ä–µ–∑ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å.
>
> **Call to Action:** –ù–∞–≤—á—ñ—Ç—å—Å—è —Ä–µ–∞–Ω—ñ–º—É–≤–∞—Ç–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–æ —Ç–æ–≥–æ, —è–∫ —Ü–µ —Å—Ç–∞–Ω–µ—Ç—å—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ ‚Äî –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π –≥–∞–π–¥ —Ç–∞ —Å–∫—Ä–∏–ø—Ç –≤–∂–µ —á–µ–∫–∞—é—Ç—å! üëá

## Business & Infrastructure Context
### Why it matters:
–ë–∞–∑–∏ –¥–∞–Ω–∏—Ö ‚Äî —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ª–∞–Ω–∫–∞ –±—É–¥—å-—è–∫–æ–≥–æ –±—ñ–∑–Ω–µ—Å-–¥–æ–¥–∞—Ç–∫–∞. –í—ñ–¥–º–æ–≤–∞ –ë–î –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ–≤–Ω–æ—ó –∑—É–ø–∏–Ω–∫–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤ (Downtime). –®–≤–∏–¥–∫–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è (MTTR) –º—ñ–Ω—ñ–º—ñ–∑—É—î —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ —Ç–∞ —Ä–µ–ø—É—Ç–∞—Ü—ñ–π–Ω—ñ –≤—Ç—Ä–∞—Ç–∏.

### Operational Domain:
- **Environment:** Cloud (Compute instances), Hybrid Cloud, Dedicated servers.
- **Layer:** Data (Database layer).
- **Stage:** Run (Maintenance & Incident Response).

### The Risk:
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö –∞–±–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è —ó—Ö —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ. –Ø–∫—â–æ —ñ–Ω–∂–µ–Ω–µ—Ä –Ω–µ –∑–Ω–∞—î, —è–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ë–î, —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ª–∏—à–∏—Ç—å—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—é –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤.

## Lab Breakdown (Step-by-Step)
### Phase 1: –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
### Step 1
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–ª—É–∂–±–∏
systemctl status mariadb
# –ü–µ—Ä–µ–≥–ª—è–¥ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ —É —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –∂—É—Ä–Ω–∞–ª—ñ
journalctl -u mariadb -xe
```
**Expected Result:** –°–ª—É–∂–±–∞ –º–∞—î —Å—Ç–∞—Ç—É—Å `failed`. –õ–æ–≥–∏ –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ –Ω–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–∞–Ω–∏—Ö.

### Phase 2: –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
### Step 2
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤
sudo mkdir -p /var/lib/mysql
sudo chown -R mysql:mysql /var/lib/mysql
```
**Expected Result:** –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞ –Ω–∞–ª–µ–∂–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É `mysql`.

### Phase 3: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ó–∞–ø—É—Å–∫
### Step 3
```bash
# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –±–∞–∑ –¥–∞–Ω–∏—Ö
sudo mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql
```
**Expected Result:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å MariaDB.

### Step 4
```bash
# –°–ø—Ä–æ–±–∞ –∑–∞–ø—É—Å–∫—É
sudo systemctl start mariadb
```
**Expected Result:** –°–ª—É–∂–±–∞ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ (`active (running)`).

## DevOps Context & Alternatives
### Cloud-native approach:
–í **Kubernetes** –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `PersistentVolumes` —Ç–∞ `StatefulSets`. –Ø–∫—â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–º–∏—Ä–∞—î, –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ. –•–º–∞—Ä–Ω—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å **RDS** (AWS) –∞–±–æ **Cloud SQL** (GCP), —è–∫—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É—é—Ç—å —Ü–∏–º–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏.

### Alternatives:
- **MySQL / PostgreSQL**: –ú–∞—é—Ç—å —Å—Ö–æ–∂—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
- **Docker Volume**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –º–æ–Ω—Ç—É–≤–∞–Ω—å –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ.

## Junior Pitfalls (Common Mistakes ‚ö†Ô∏è)
- **–ó–∞–ø—É—Å–∫ –≤—ñ–¥ root**: –ù–∞–º–∞–≥–∞—Ç–∏—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ë–î –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—ñ–¥ root, —â–æ –ø–æ—Ä—É—à—É—î –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤.
- **–Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤**: –°–ø—Ä–æ–±–∞ –ø–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Å–µ –ø—ñ–¥—Ä—è–¥ –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –ø–æ–º–∏–ª–∫—É –≤ `journalctl`.
- **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –±–µ–∫–∞–ø—ñ–≤**: –ù–∞–º–∞–≥–∞—Ç–∏—Å—è –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –Ω–∞ "–∂–∏–≤–∏—Ö" –¥–∞–Ω–∏—Ö –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó —Å–ø—Ä–æ–±–∏ –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–ø—ñ—é —Ç–æ–≥–æ, —â–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—è.

## Summary for Interview (Best Practices)
1. **Logs First**: –ó–∞–≤–∂–¥–∏ –ø–æ—á–∏–Ω–∞–π—Ç–µ –∑ `journalctl` —Ç–∞ –ª–æ–≥—ñ–≤ —Å–∞–º–æ—ó –±–∞–∑–∏ (`/var/log/mysql/error.log`).
2. **Permissions**: 90% –ø—Ä–æ–±–ª–µ–º –∑ –ë–î –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ–π ‚Äî —Ü–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.
3. **Data Integrity**: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è ‚Äî —Ü–µ –∫—Ä–∞–π–Ω—ñ–π –∑–∞—Ö—ñ–¥, —è–∫—â–æ –¥–∞–Ω—ñ –≤–∂–µ –≤—Ç—Ä–∞—á–µ–Ω—ñ –∞–±–æ —Ü–µ –Ω–æ–≤–∞ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è.
4. **White Hat Insight**: –ù–µ–∑–∞—Ö–∏—â–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (–±–µ–∑ –ø–∞—Ä–æ–ª—è root) ‚Äî —Ü–µ –≤—ñ–∫–Ω–æ –¥–ª—è –∞—Ç–∞–∫–∏. –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `mysql_secure_installation`.
5. **Observability**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana) –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –ë–î —Ç–∞ –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É.

---
**Previous Day:** [Day 8: Install Ansible](../day8)
